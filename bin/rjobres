#!/usr/bin/ruby

require 'lib/rsgejobs'

job = Rsgejobs.new
jobList = job.list

xlong = 0
long = 0
medium = 0
short = 0

jobList.each do |jobid|
    job.set_jobid(jobid)
    if (job.owner != ARGV[0] && ARGV[0] != nil)
        next
    end
    hr = job.hard_request_list
    sr = job.soft_request_list

    print jobid + " " + job.state + " " + job.slots + " " + job.owner + " " + job.subTime.to_s + " "

    hr.each do |cplx| 
        print cplx + "=" 
        if (cplx == "mem_free" || cplx == "virtual_free")
            print "%.2fG " % job.hard_request(cplx).as_gibi
        else
            print job.hard_request(cplx).value + " "
        end
    end
    sr.each do |cplx|
        print cplx + "=" + job.soft_request(cplx).value + " "
    end
    puts
end
