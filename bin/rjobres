#!/usr/bin/env ruby

require 'rsgejob'

jobs = Rsgejobs.new

xlong = 0
long = 0
medium = 0
short = 0

jobs.each do |job|
    if (job.jobid != ARGV[0] && ARGV[0] != nil)
        next
    end
    hr = job.hard_request_list
    sr = job.soft_request_list

    printf("\033[36m%10s\033[0m %3s %6s %16s => ", job.jobid, job.state, job.slots, job.owner)

    hr.each do |cplx| 
        print "\033[31m" + cplx + "="
        if (cplx == "mem_free" || cplx == "virtual_free")
            print "%.2fG " % job.hard_request(cplx).as_gibi
        else
            print job.hard_request(cplx).value + "\033[0m "
        end
    end
    sr.each do |cplx|
        print "\033[32m" + cplx + "=" + job.soft_request(cplx).value + "\033[0m "
    end
    puts
end
